<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="WpfInteractionApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Contextualizer" Height="800" Width="1200"
        Style="{DynamicResource Carbon.Window}">
    <DockPanel LastChildFill="True">
        <Menu DockPanel.Dock="Top" Style="{DynamicResource Carbon.Menu}">
            <MenuItem Header="File" Style="{DynamicResource Carbon.MenuItem}">
                <MenuItem Header="Exit" Click="ExitMenuItem_Click" Style="{DynamicResource Carbon.MenuItem}"/>
            </MenuItem>
            <MenuItem Header="Theme" Style="{DynamicResource Carbon.MenuItem}">
                <MenuItem Header="Toggle Theme" Click="ToggleTheme_Click" Style="{DynamicResource Carbon.MenuItem}"/>
            </MenuItem>
            <MenuItem Header="Settings" Style="{DynamicResource Carbon.MenuItem}">
                <MenuItem Header="Application Settings" Click="SettingsMenuItem_Click" Style="{DynamicResource Carbon.MenuItem}"/>
            </MenuItem>
            <MenuItem Header="Manual Handlers" Name="ManualHandlersMenu" Style="{DynamicResource Carbon.MenuItem}"/>
        </Menu>

        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="*" MinHeight="200"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="200" MinHeight="100" MaxHeight="400"/>
            </Grid.RowDefinitions>

            <TabControl Grid.Row="0" 
                       Name="TabControl" 
                       Style="{DynamicResource Carbon.TabControl}">
                <TabControl.Template>
                    <ControlTemplate TargetType="TabControl">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <TabPanel Grid.Row="0" 
                                     IsItemsHost="True" 
                                     Panel.ZIndex="1"/>
                            <ContentPresenter Grid.Row="1" 
                                            ContentSource="SelectedContent"/>
                        </Grid>
                    </ControlTemplate>
                </TabControl.Template>
            </TabControl>

            <GridSplitter Grid.Row="1"
                         Height="5"
                         HorizontalAlignment="Stretch"
                         VerticalAlignment="Center"
                         Background="{DynamicResource Carbon.Brush.Background.Tertiary}"
                         ShowsPreview="True"
                         ResizeDirection="Rows"
                         ResizeBehavior="PreviousAndNext"/>

            <ListBox Grid.Row="2" 
                     Name="LogListBox"
                     Style="{DynamicResource Carbon.ListBox}"
                     ItemContainerStyle="{DynamicResource Carbon.ListBoxItem}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="{Binding Timestamp, StringFormat=HH:mm:ss}" 
                                     Style="{DynamicResource Carbon.TextBlock.Base}"
                                     Margin="0,0,8,0"/>
                            <TextBlock Text="{Binding Type}" 
                                     Style="{DynamicResource Carbon.TextBlock.Base}"
                                     Margin="0,0,8,0"/>
                            <TextBlock Text="{Binding Message}" 
                                     Style="{DynamicResource Carbon.TextBlock.Base}"/>
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid>
    </DockPanel>
</Window>
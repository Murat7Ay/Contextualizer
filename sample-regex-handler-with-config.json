{
  "id": "sample-regex-handler-with-config",
  "name": "Advanced Email Extractor with Config",
  "version": "1.0.0",
  "author": "Contextualizer Team",
  "description": "A sample regex handler that processes email addresses and sends to configured API endpoint",
  "tags": [
    "sample",
    "regex",
    "email",
    "config"
  ],
  "template_user_inputs": [
    {
      "key": "api_endpoint",
      "title": "API Endpoint",
      "message": "Enter the API endpoint URL where emails will be sent:",
      "is_required": true,
      "default_value": "https://api.example.com/emails",
      "config_target": "config.endpoints.email_api"
    },
    {
      "key": "api_key",
      "title": "API Key",
      "message": "Enter your API key for authentication:",
      "is_required": true,
      "is_password": true,
      "config_target": "secrets.api_keys.email_service"
    },
    {
      "key": "notification_enabled",
      "title": "Enable Notifications",
      "message": "Do you want to receive notifications when emails are processed?",
      "is_selection_list": true,
      "selection_items": [
        { "value": "true", "display": "Yes, enable notifications" },
        { "value": "false", "display": "No, disable notifications" }
      ],
      "default_value": "true",
      "config_target": "config.settings.email_notifications"
    }
  ],
  "handlerJson": {
    "name": "Advanced Email Extractor",
    "type": "regex", 
    "screen_id": "email_screen",
    "title": "Extract and Process Email Addresses",
    "description": "Extracts email addresses from clipboard text and sends to configured API",
    "regex": "\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b",
    "actions": [
      {
        "name": "api_call",
        "url": "$config:endpoints.email_api",
        "method": "POST",
        "headers": {
          "Authorization": "Bearer $config:api_keys.email_service",
          "Content-Type": "application/json"
        },
        "request_body": {
          "email": "$(_match)",
          "source": "contextualizer",
          "timestamp": "$func:now.format(yyyy-MM-dd HH:mm:ss)",
          "notify": "$config:settings.email_notifications"
        }
      },
      {
        "name": "simple_print_key",
        "key": "_self"
      }
    ],
    "output_format": "✅ Processed email: $(_match) → Sent to $config:endpoints.email_api",
    "seeder": {
      "processing_time": "$func:now.format(HH:mm:ss)",
      "api_endpoint": "$config:endpoints.email_api",
      "notifications": "$config:settings.email_notifications"
    }
  }
}
